"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function AccordionController(e,t,n){"ngInject";var o=this;o.groups=[],o.closeOthers=function(o){var a=_angular2.default.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;a&&_angular2.default.forEach(this.groups,function(e){e!==o&&(e.isOpen=!1)})},o.addGroup=function(e){this.groups.push(e)},o.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}function DropdownToggleController(e,t,n,o,a,i){"ngInject";var r=this;r.css={},r.toggle=function(){if(r.active=!r.active,r.css={},r.active){var e=_angular2.default.element(o[0].querySelector(".dropdown-pane")),t=_angular2.default.element(o[0].querySelector("toggle")),i=(e.prop("offsetWidth"),a.position(t));r.css.top=i.top+i.height+5+"px",r.css.left=i.left+"px",n.small()&&!n.medium()}}}AccordionController.$inject=["$scope","$attrs","accordionConfig"],DropdownToggleController.$inject=["$scope","$attrs","mediaQueries","$element","$position","$window"];var _angular=require("angular"),_angular2=_interopRequireDefault(_angular),_angularMocks=require("angular-mocks"),_angularMocks2=_interopRequireDefault(_angularMocks);_angular2.default.module("mm.foundation.accordion",[]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",AccordionController).directive("accordion",function(){"ngInject";return{restrict:"EA",controller:AccordionController,controllerAs:"$ctrl",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){"ngInject";return{require:{accordion:"^accordion"},restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{},controllerAs:"$ctrl",bindToController:{heading:"@"},controller:["$scope","$attrs","$parse",function(e,t,n){var o=this;o.isOpen=!1,o.setHTMLHeading=function(e){o.HTMLHeading=e},o.$onInit=function(){o.accordion.addGroup(o),e.$on("$destroy",function(e){o.accordion.removeGroup(o)});var a,i;t.isOpen&&(a=n(t.isOpen),i=a.assign,e.$parent.$watch(a,function(e){o.isOpen=!!e})),e.$watch(function(){return o.isOpen},function(t){t&&o.accordion.closeOthers(o),i&&i(e.$parent,t)})}}]}}).directive("accordionHeading",function(){"ngInject";return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,o,a){o.setHTMLHeading(a(e,function(){}))}}}).directive("accordionTransclude",function(){"ngInject";return{require:"^accordionGroup",link:function(e,t,n,o){e.$watch(function(){return o.HTMLHeading},function(e){e&&(t.html(""),t.append(e))})}}}),_angular2.default.module("mm.foundation.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){"ngInject";e.closeable="close"in t&&"undefined"!=typeof t.close}]).directive("alert",function(){"ngInject";return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}});var inject=_angularMocks2.default.inject,_module=_angularMocks2.default.module;_angular2.default.module("mm.foundation.bindHtml",[]).directive("bindHtmlUnsafe",function(){"ngInject";return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),_angular2.default.module("mm.foundation.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass,this.toggleEvent=e.toggleEvent}]).directive("btnRadio",function(){"ngInject";return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,o){var a=o[0],i=o[1];i.$render=function(){t.toggleClass(a.activeClass,_angular2.default.equals(i.$modelValue,e.$eval(n.btnRadio)))},t.bind(a.toggleEvent,function(){t.hasClass(a.activeClass)||e.$apply(function(){i.$setViewValue(e.$eval(n.btnRadio)),i.$render()})})}}}).directive("btnCheckbox",function(){"ngInject";return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,o){function a(){return r(n.btnCheckboxTrue,!0)}function i(){return r(n.btnCheckboxFalse,!1)}function r(t,n){var o=e.$eval(t);return _angular2.default.isDefined(o)?o:n}var l=o[0],c=o[1];c.$render=function(){t.toggleClass(l.activeClass,_angular2.default.equals(c.$modelValue,a()))},t.bind(l.toggleEvent,function(){e.$apply(function(){c.$setViewValue(t.hasClass(l.activeClass)?i():a()),c.$render()})})}}});var mod=_angular2.default.module("mm.foundation.dropdownToggle",["mm.foundation.position","mm.foundation.mediaQueries"]);mod.directive("dropdownToggle",["$document","$window","$location","$position",function(e,t,n,o){"ngInject";_angular2.default.noop;return{scope:{},restrict:"EA",transclude:{toggle:"toggle",pane:"pane"},templateUrl:"template/dropdownToggle/dropdownToggle.html",controller:DropdownToggleController,controllerAs:"$ctrl"}}]),_angular2.default.module("mm.foundation.mediaQueries",[]).factory("matchMedia",["$document","$window",function(e,t){"ngInject";return t.matchMedia||function(e,t){var n,o=e.documentElement,a=o.firstElementChild||o.firstChild,i=e.createElement("body"),r=e.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",i.style.background="none",i.appendChild(r),function(e){return r.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',o.insertBefore(i,a),n=42===r.offsetWidth,o.removeChild(i),{matches:n,media:e}}}(e[0])}]).factory("mediaQueries",["$document","matchMedia",function(e,t){"ngInject";var n=_angular2.default.element(e[0].querySelector("head"));n.append('<meta class="foundation-mq-topbar" />'),n.append('<meta class="foundation-mq-small" />'),n.append('<meta class="foundation-mq-medium" />'),n.append('<meta class="foundation-mq-large" />');var o=/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,a={topbar:getComputedStyle(n[0].querySelector("meta.foundation-mq-topbar")).fontFamily.replace(o,""),small:getComputedStyle(n[0].querySelector("meta.foundation-mq-small")).fontFamily.replace(o,""),medium:getComputedStyle(n[0].querySelector("meta.foundation-mq-medium")).fontFamily.replace(o,""),large:getComputedStyle(n[0].querySelector("meta.foundation-mq-large")).fontFamily.replace(o,"")};return{topbarBreakpoint:function(){return!t(a.topbar).matches},small:function(){return t(a.small).matches},medium:function(){return t(a.medium).matches},large:function(){return t(a.large).matches}}}]),_angular2.default.module("mm.foundation.modal",["mm.foundation.transition"]).factory("$$stackedMap",function(){"ngInject";return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function t(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,o=0;o<e.length;o++)if(t==e[o].key){n=o;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){"ngInject";return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(n){n.animate=!1,t(function(){n.animate=!0}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){"ngInject";return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(e,n,o){e.windowClass=o.windowClass||"",t(function(){e.animate=!0,n[0].querySelectorAll("[autofocus]").length>0?n[0].querySelectorAll("[autofocus]")[0].focus():n[0].focus()})}}}]).factory("$modalStack",function(e,t,n,o,a,i,r){function l(){for(var e=-1,t=h.keys(),n=0;n<t.length;n++)h.get(t[n]).value.backdrop&&(e=n);return e}function c(){for(var e=h.keys(),t=0;t<e.length;t++)b.reposition(e[t])}function u(t){var n=o.find("body").eq(0),a=h.get(t).value;h.remove(t),d(a.modalDomEl,a.modalScope,0,function(){a.modalScope.$destroy(),s(),0===h.length()&&(n.removeClass(v),_angular2.default.element(e).unbind("resize",c))})}function s(){if(p&&-1==l()){var e=m;d(p,m,0,function(){e.$destroy(),e=null}),p=void 0,m=void 0}}function d(e,o,a,i){function r(){r.done||(r.done=!0,e.remove(),i&&i())}o.animate=!1;var l=t.transitionEndEventName;if(l){var c=n(r,a);e.bind(l,function(){n.cancel(c),r(),o.$apply()})}else n(r,0)}function f(e){var t,n=e.options,o=n.modalDomEl,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=o[0].offsetWidth,l=o[0].offsetHeight,c=parseInt((a-r)/2,10);return t=l>i?parseInt(Math.min(100,i/10),10):parseInt((i-l)/4,10),{top:t,left:c}}var p,m,g=o.find("body").eq(0),v="is-reveal-open",h=r.createNew(),b={};return i.$watch(l,function(e){m&&(m.index=e)}),o.bind("keydown",function(e){var t;27===e.which&&(t=h.top(),t&&t.value.keyboard&&i.$apply(function(){b.dismiss(t.key)}))}),b.open=function(t,o){t.options={deferred:o.deferred,modalScope:o.scope,backdrop:o.backdrop,keyboard:o.keyboard},h.add(t,t.options);var r=l();r>=0&&!p&&(m=i.$new(!0),m.index=r,p=a("<div modal-backdrop></div>")(m)),1===h.length()&&_angular2.default.element(e).bind("resize",c);var u=o.scope.animate;o.scope.animate=!1;var s=_angular2.default.element("<div modal-window></div>").attr({style:"visibility: visible; z-index: -1; display: block;","window-class":o.windowClass,index:h.length()-1,animate:"animate"});return s.html(o.content),s=a(s)(o.scope),n(function(){o.scope.$apply(),h.top().value.modalDomEl=s,g.prepend(s);var e=f(t,!0);s.detach(),o.scope.animate=u,s.attr({style:"visibility: visible; top: "+e.top+"px; left: "+e.left+"px; display: block;"}),o.scope.$apply(),g.prepend(p),g.prepend(s),g.addClass(v)})},b.reposition=function(e){var t=h.get(e).value;if(t){var n=t.modalDomEl,o=f(e);n.css("top",o.top+"px"),n.css("left",o.left+"px")}},b.close=function(e,t){var n=h.get(e);n&&(n.value.deferred.resolve(t),u(e))},b.dismiss=function(e,t){var n=h.get(e);n&&(n.value.deferred.reject(t),u(e))},b.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},b.getTop=function(){return h.top()},b}).provider("$modal",function(){"ngInject";var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,o,a,i,r,l){function c(e){return e.template?o.when(e.template):a.get(e.templateUrl,{cache:i}).then(function(e){return e.data})}function u(e){var n=[];return _angular2.default.forEach(e,function(e,a){(_angular2.default.isFunction(e)||_angular2.default.isArray(e))&&n.push(o.when(t.invoke(e)))}),n}var s={};return s.open=function(t){var a=o.defer(),i=o.defer(),s={result:a.promise,opened:i.promise,close:function(e){l.close(s,e)},dismiss:function(e){l.dismiss(s,e)},reposition:function(){l.reposition(s)}};if(t=_angular2.default.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=o.all([c(t)].concat(u(t.resolve)));return d.then(function(e){var o=(t.scope||n).$new();o.$close=s.close,o.$dismiss=s.dismiss;var i,c={},u=1;return t.controller&&(c.$scope=o,c.$modalInstance=s,_angular2.default.forEach(t.resolve,function(t,n){c[n]=e[u++]}),i=r(t.controller,c),t.controllerAs&&(o[t.controllerAs]=i)),l.open(s,{scope:o,deferred:a,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,windowClass:t.windowClass})},function(e){a.reject(e)}),d.then(function(){i.resolve(!0)},function(){i.reject(!1)}),s},s}]};return e}),_angular2.default.module("mm.foundation.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(e,t,n,o){var a=this,i=t.numPages?n(t.numPages).assign:_angular2.default.noop;this.init=function(o){t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){a.itemsPerPage=parseInt(t,10),e.totalPages=a.calculateTotalPages()}):this.itemsPerPage=o},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===e.totalPages},this.isActive=function(e){return this.page===e},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.getAttributeValue=function(t,n,a){return _angular2.default.isDefined(t)?a?o(t)(e.$parent):e.$parent.$eval(t):n},this.render=function(){this.page=parseInt(e.page,10)||1,this.page>0&&this.page<=e.totalPages&&(e.pages=this.getPages(this.page,e.totalPages))},e.selectPage=function(t){!a.isActive(t)&&t>0&&t<=e.totalPages&&(e.page=t,e.onSelectPage({page:t}))},e.$watch("page",function(){a.render()}),e.$watch("totalItems",function(){e.totalPages=a.calculateTotalPages()}),e.$watch("totalPages",function(t){i(e.$parent,t),a.page>t?e.selectPage(t):a.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){"ngInject";return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,o,a,i){function r(e,t,n,o){return{number:e,text:t,active:n,disabled:o}}var l,c=i.getAttributeValue(a.boundaryLinks,t.boundaryLinks),u=i.getAttributeValue(a.directionLinks,t.directionLinks),s=i.getAttributeValue(a.firstText,t.firstText,!0),d=i.getAttributeValue(a.previousText,t.previousText,!0),f=i.getAttributeValue(a.nextText,t.nextText,!0),p=i.getAttributeValue(a.lastText,t.lastText,!0),m=i.getAttributeValue(a.rotate,t.rotate);i.init(t.itemsPerPage),a.maxSize&&n.$parent.$watch(e(a.maxSize),function(e){l=parseInt(e,10),i.render()}),i.getPages=function(e,t){var n=[],o=1,a=t,g=_angular2.default.isDefined(l)&&t>l;g&&(m?(o=Math.max(e-Math.floor(l/2),1),a=o+l-1,a>t&&(a=t,o=a-l+1)):(o=(Math.ceil(e/l)-1)*l+1,a=Math.min(o+l-1,t)));for(var v=o;a>=v;v++){var h=r(v,v,i.isActive(v),!1);n.push(h)}if(g&&!m){if(o>1){var b=r(o-1,"...",!1,!1);n.unshift(b)}if(t>a){var $=r(a+1,"...",!1,!1);n.push($)}}if(u){var y=r(e-1,d,!1,i.noPrevious());n.unshift(y);var k=r(e+1,f,!1,i.noNext());n.push(k)}if(c){var w=r(1,s,!1,i.noPrevious());n.unshift(w);var C=r(t,p,!1,i.noNext());n.push(C)}return n}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){"ngInject";return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,o,a){function i(e,t,n,o,a){return{number:e,text:t,disabled:n,previous:c&&o,next:c&&a}}var r=a.getAttributeValue(o.previousText,e.previousText,!0),l=a.getAttributeValue(o.nextText,e.nextText,!0),c=a.getAttributeValue(o.align,e.align);a.init(e.itemsPerPage),a.getPages=function(e){return[i(e-1,r,a.noPrevious(),!0,!1),i(e+1,l,a.noNext(),!1,!0)]}}}}]),_angular2.default.module("mm.foundation.position",[]).factory("$position",["$document","$window",function(e,t){"ngInject";function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function o(e){return"static"===(n(e,"position")||"static")}var a=function(t){for(var n=e[0],a=t.offsetParent||n;a&&a!==n&&o(a);)a=a.offsetParent;return a||n};return{position:function(t){var n=this.offset(t),o={top:0,left:0},i=a(t[0]);i!=e[0]&&(o=this.offset(_angular2.default.element(i)),o.top+=i.clientTop-i.scrollTop,o.left+=i.clientLeft-i.scrollLeft);var r=t[0].getBoundingClientRect();return{width:r.width||t.prop("offsetWidth"),height:r.height||t.prop("offsetHeight"),top:n.top-o.top,left:n.left-o.left}},offset:function(n){var o=n[0].getBoundingClientRect();return{width:o.width||n.prop("offsetWidth"),height:o.height||n.prop("offsetHeight"),top:o.top+(t.pageYOffset||e[0].body.scrollTop||e[0].documentElement.scrollTop),left:o.left+(t.pageXOffset||e[0].body.scrollLeft||e[0].documentElement.scrollLeft)}}}}]),_angular2.default.module("mm.foundation.tabs",[]).controller("TabsetController",["$scope",function(e){"ngInject";var t=this,n=t.tabs=e.tabs=[];_angular2.default.isUndefined(e.openOnLoad)&&(e.openOnLoad=!0),t.select=function(e){_angular2.default.forEach(n,function(e){e.active=!1}),e.active=!0},t.addTab=function(o){n.push(o),e.openOnLoad&&(1===n.length||o.active)&&t.select(o)},t.removeTab=function(e){var o=n.indexOf(e);if(e.active&&n.length>1){var a=o==n.length-1?o-1:o+1;t.select(n[a])}n.splice(o,1)}}]).directive("tabset",function(){"ngInject";return{restrict:"EA",transclude:!0,replace:!0,scope:{openOnLoad:"=?"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=_angular2.default.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=_angular2.default.isDefined(n.justified)?e.$parent.$eval(n.justified):!1,e.type=_angular2.default.isDefined(n.type)?e.$parent.$eval(n.type):"tabs"}}}).directive("tab",["$parse",function(e){"ngInject";return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,o){return function(t,n,a,i){var r,l;a.active?(r=e(a.active),l=r.assign,t.$parent.$watch(r,function(e,n){e!==n&&(t.active=!!e)}),t.active=r(t.$parent)):l=r=_angular2.default.noop,t.$watch("active",function(e){_angular2.default.isFunction(l)&&(l(t.$parent,e),e?(i.select(t),t.onSelect()):t.onDeselect())}),t.disabled=!1,a.disabled&&t.$parent.$watch(e(a.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},i.addTab(t),t.$on("$destroy",function(){i.removeTab(t)}),t.$transcludeFn=o}}}}]).directive("tabHeadingTransclude",function(){"ngInject";return{restrict:"A",require:"^tab",link:function(e,t,n,o){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("tabContentTransclude",function(){"ngInject";function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,o){var a=t.$eval(o.tabContentTransclude);a.$transcludeFn(a.$parent,function(t){_angular2.default.forEach(t,function(t){e(t)?a.headingElement=t:n.append(t)})})}}}),_angular2.default.module("mm.foundation.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){"ngInject";function o(e){for(var t in e)if(void 0!==i.style[t])return e[t]}var a=function c(o,a,i){i=i||{};var r=e.defer(),l=c[i.animation?"animationEndEventName":"transitionEndEventName"],u=function s(e){n.$apply(function(){o.unbind(l,s),r.resolve(o)})};return l&&o.bind(l,u),t(function(){_angular2.default.isString(a)?o.addClass(a):_angular2.default.isFunction(a)?a(o):_angular2.default.isObject(a)&&o.css(a),l||r.resolve(o)}),r.promise.cancel=function(){l&&o.unbind(l,u),r.reject("Transition cancelled")},r.promise},i=document.createElement("trans"),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},l={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return a.transitionEndEventName=o(r),a.animationEndEventName=o(l),a}]),_angular2.default.module("mm.foundation",["mm.foundation.accordion","mm.foundation.alert","mm.foundation.bindHtml","mm.foundation.buttons","mm.foundation.dropdownToggle","mm.foundation.mediaQueries","mm.foundation.modal","mm.foundation.pagination","mm.foundation.position","mm.foundation.tabs","mm.foundation.transition"]);